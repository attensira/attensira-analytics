{"version":3,"sources":["../src/react.tsx","../src/index.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport { trackPageHit } from './index';\n\nexport type AttensiraProps = {\n  projectId: string;\n};\n\nexport function AttensiraAnalytics({ projectId }: AttensiraProps) {\n  useEffect(() => {\n    trackPageHit(projectId);\n  }, [projectId]);\n\n  return null;\n}\n\nexport default AttensiraAnalytics;\n","const INGEST_URL = 'https://ingest.attensira.com/v1/crawler-logs';\n\nconst sent = new Set<string>();\n\n/**\n * Collects basic page-hit data from the browser and sends it to the\n * Attensira ingest API. Safe to call multiple times; duplicate calls\n * for the same projectId + href are ignored.\n */\nexport function trackPageHit(projectId: string): void {\n  if (!projectId || typeof window === 'undefined') return;\n\n  const href = window.location.href;\n  const dedupeKey = `${projectId}:${href}`;\n  if (sent.has(dedupeKey)) return;\n  sent.add(dedupeKey);\n\n  const payload = JSON.stringify({\n    project_id: projectId,\n    action: 'page_hit',\n    payload: {\n      href,\n      referrer: document.referrer || '',\n      user_agent: navigator.userAgent,\n      locale: navigator.language || '',\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || '',\n    },\n  });\n\n  navigator.sendBeacon(INGEST_URL, new Blob([payload], { type: 'application/json' }));\n}\n\nexport { AttensiraAnalytics, type AttensiraProps } from './react';\nexport { AttensiraAnalytics as default } from './react';\n"],"mappings":"yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,wBAAAE,EAAA,YAAAC,IAAA,eAAAC,EAAAJ,GAAA,IAAAK,EAA0B,iBCA1B,IAAMC,EAAa,+CAEbC,EAAO,IAAI,IAOV,SAASC,EAAaC,EAAyB,CACpD,GAAI,CAACA,GAAa,OAAO,QAAW,YAAa,OAEjD,IAAMC,EAAO,OAAO,SAAS,KACvBC,EAAY,GAAGF,CAAS,IAAIC,CAAI,GACtC,GAAIH,EAAK,IAAII,CAAS,EAAG,OACzBJ,EAAK,IAAII,CAAS,EAElB,IAAMC,EAAU,KAAK,UAAU,CAC7B,WAAYH,EACZ,OAAQ,WACR,QAAS,CACP,KAAAC,EACA,SAAU,SAAS,UAAY,GAC/B,WAAY,UAAU,UACtB,OAAQ,UAAU,UAAY,GAC9B,SAAU,KAAK,eAAe,EAAE,gBAAgB,EAAE,UAAY,EAChE,CACF,CAAC,EAED,UAAU,WAAWJ,EAAY,IAAI,KAAK,CAACM,CAAO,EAAG,CAAE,KAAM,kBAAmB,CAAC,CAAC,CACpF,CDvBO,SAASC,EAAmB,CAAE,UAAAC,CAAU,EAAmB,CAChE,sBAAU,IAAM,CACdC,EAAaD,CAAS,CACxB,EAAG,CAACA,CAAS,CAAC,EAEP,IACT,CAEA,IAAOE,EAAQH","names":["react_exports","__export","AttensiraAnalytics","react_default","__toCommonJS","import_react","INGEST_URL","sent","trackPageHit","projectId","href","dedupeKey","payload","AttensiraAnalytics","projectId","trackPageHit","react_default"]}